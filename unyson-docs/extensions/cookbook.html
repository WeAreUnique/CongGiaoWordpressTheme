<!DOCTYPE html>
<!--[if lt IE 8 ]><html lang="en" class="no-js oldie"><![endif]-->
<!--[if IE 8 ]><html lang="en" class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html lang="en" class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en" class="no-js"><!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Cookbook &mdash; Unyson Framework  documentation</title>

    <link rel="shortcut icon" href="../_static/favicon.ico"/>

    

    
    
        <link rel="stylesheet" href="../_static/css/bootstrap.min.css" type="text/css" />
    
        <link rel="stylesheet" href="../_static/css/pygments.theme.css" type="text/css" />
    
        <link rel="stylesheet" href="../_static/css/animate.css" type="text/css" />
    

    
    
    <!--<link rel="stylesheet" href="https://media.readthedocs.org/css/badge_only.css" type="text/css" />-->
    

    <link rel="stylesheet" href="../_static/css/styles.css" type="text/css" />
            <link rel="index" title="Index" href="../genindex.html"/>
            <link rel="search" title="Search" href="../search.html"/>
        <link rel="top" title="Unyson Framework  documentation" href="../index.html"/>
            <link rel="up" title="Extensions" href="index.html"/>
            <link rel="next" title="Components" href="../components/index.html"/>
            <link rel="prev" title="Create Extension" href="create-extension.html"/>

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT: '../',
            VERSION: '',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE: 'true'
        };
    </script>

    <!--[if lt IE 9]><script src="../_static/js/respond.min.js"></script><![endif]-->

    <script type="text/javascript">
        var tfVars = {
            'logo_src': "../_static/img/logo.png",
            'header_bg_src': "../_static/img/header-bg.jpg"
        };
    </script>

    
        <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="../_static/js/jquery.slicknav.min.js"></script>
        <script type="text/javascript" src="../_static/js/scripts.js"></script>
        <script type="text/javascript" src="//use.typekit.net/dmy3vly.js"></script>
        <script type="text/javascript">try{ Typekit.load(); }catch(e){}</script>
     
</head>

<body>
    <a id="banner-bitblox"
   href="http://www.bitblox.me/?utm_source=unyson&utm_medium=banner&utm_campaign=unyson"
   target="_blank"><img src="../_static/img/bitblox.jpg" alt="Bitblox">
</a>

<header id="masthead" class="site-header">
    <!-- Logo & Menu -->
    <div class="header">
        <div class="container">
            <div class="row">
                <div class="col-md-16">
                    <div class="site-logo invisible"><a href="http://unyson.io/"><img src="../_static/img/unyson-logo.png" alt="" ></a></div>
					
					<nav id="primary-navigation" class="site-navigation primary-navigation invisible" role="navigation">
						<ul class="nav-menu clearfix">
							<li>
								<a href="http://unyson.io/">Unyson</a>
								<ul>
									<li><a href="http://unyson.io/#section-extensions"><i class="icon-matrix"></i>extensions<span>Built in extensions</span></a></li>
									<li><a href="http://unyson.io/#parallax3"><i class="icon-gear"></i>test unyson<span>Try it for free</span></a></li>
									<li><a href="http://unyson.io/#section-download"><i class="icon-unyson"></i>Get Unyson<span>WP Framework</span></a></li>
								</ul>
							</li>
							<li>
								<a target="_blank" href="http://demo.unyson.io">Scratch Theme</a>
								<ul>
									<li><a target="_blank" href="http://demo.unyson.io"><i class="icon-notebook"></i>Live demo<span>Check it out</span></a></li>
									<li><a target="_blank" href="https://github.com/ThemeFuse/Scratch-Theme/releases/latest"><i class="icon-download"></i>Get Theme<span>Scratch Theme</span></a></li>
								</ul>
							</li>
							<li class="active">
								<a href="http://manual.unyson.io/en/latest/">Support</a>
								<ul>
									<li><a href="http://manual.unyson.io/en/latest/"><i class="icon-tools"></i>Dev Manual<span>Develop themes</span></a></li>
									<li class="menu-submit-request"><a target="_blank" href="https://github.com/ThemeFuse/Unyson/issues"><i class="icon-support-1"></i>Post a ticket<span>Ask us a question</span></a></li>
								</ul>
							</li>
							
							<!--<li class="divider"><span>|</span></li>
							<li>
								<a href="http://docs.unyson.io/login">DOCS Creator</a>
								<ul>
									<li><a href="http://docs.unyson.io/login"><i class="icon-register"></i>Register<span>Create an account</span></a></li>
									<li><a href="http://docs.unyson.io/login"><i class="icon-login"></i>Login<span>Create/Edit docs</span></a></li>
									</ul>
								</li>-->  
								<!--<li>
									<a href="http://docs.unyson.io/login">Account</a>
									<ul>
										<li><a href="http://docs.unyson.io/login"><i class="icon-register"></i>Register<span>Create an account</span></a></li>
										<li><a href="http://docs.unyson.io/login"><i class="icon-login"></i>Login<span>Download themes</span></a></li>
									</ul>
								</li>-->
							</ul>
						</nav>
                </div>
            </div>
        </div>
    </div>
    <!--/ Logo & Menu -->
</header>

<!-- Main Header -->
<section class="main-header margin-bottom-60">
    <!-- Loading Spinner -->
    <div class="spinner">
        <div class="wBall" id="wBall_1">
            <div class="wInnerBall">
            </div>
        </div>
        <div class="wBall" id="wBall_2">
            <div class="wInnerBall">
            </div>
        </div>
        <div class="wBall" id="wBall_3">
            <div class="wInnerBall">
            </div>
        </div>
        <div class="wBall" id="wBall_4">
            <div class="wInnerBall">
            </div>
        </div>
        <div class="wBall" id="wBall_5">
            <div class="wInnerBall">
            </div>
        </div>
    </div>
    <!--/ Loading Spinner -->

    <div class="page-header invisible" style="background-image: url(../_static/img/header-bg.jpg);">
        <div class="page-title-block">
            <div class="page-title-before invisible">Need help in the process of creating your own WordPress theme?</div>
            <h1 class="page-title invisible">Check out our extended</h1>
            <h2 class="page-subtitle invisible">Developer Manual</h2>
            <form accept-charset="UTF-8" action="../search.html" id="search-form" class="invisible" method="get" role="search">
    <input id="query" class="query" name="q" placeholder="Search" type="search" autocomplete="off">
    <button id="search-submit" type="submit"><i class="icon-search"></i></button>
</form>
        </div>
    </div>
</section>
<!-- Main Header -->









    <div id="content-anchor">
        <a name="content"></a>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-lg-12 col-lg-offset-2">
                <div class="row" id="before-content">
                    <div class="col-sm-12">
                        <nav class="clearfix">
                            <ol id="breadcrumbs">
                                <li><a href="../index.html">Unyson Framework</a></li>

                                
                                <li><a href="index.html">Extensions</a></li>
                                

                                <li>Cookbook</li>
                            </ol>
                        </nav>
                    </div>
                    <div class="col-sm-4">
                        
<div class="versions">
    <div class="current-version">
        <span>latest version</span>
        <div class="other-versions hidden">
            <dl>
                <dt>Versions:</dt>
                <dd><a href="/en/latest/">Latest</a>,</dd>
                <dd><a href="/en/latest/">0.6.1</a></dd>
            </dl>
            <dl>
                <dt>Downloads:</dt>
                <dd><a href="https://media.readthedocs.org/pdf/generity/latest/generity.pdf">PDF</a>,</dd>
                <dd><a href="https://media.readthedocs.org/htmlzip/generity/latest/generity.zip">HTML</a>,</dd>
                <dd><a href="https://media.readthedocs.org/epub/generity/latest/generity.epub">Epub</a></dd>
            </dl>
            <dl>
                <dt>On Read the Docs:</dt>
                <dd>
                    <a href="//readthedocs.org/projects/generity/?fromdocs=generity">Project Home</a>,
                </dd>
                <dd>
                    <a href="//readthedocs.org/builds/generity/?fromdocs=generity">Builds</a>
                </dd>
            </dl>
            <div class="sign">Hosting provided by <a href="http://www.readthedocs.org">Read the Docs</a>.</div>
        </div>
    </div>
</div>

<script type="text/javascript">
    jQuery(function($){
        $(".current-version").hover(function(){
            var $this = $(this),
                dropdown = $this.children(".other-versions");

            dropdown.removeClass('hidden animated fadeOutUpSmall fadeInDownSmall');

            var menuItemWidth = $this.outerWidth(),
                submenuItemWidth = dropdown.outerWidth();

            dropdown.css('left' , (menuItemWidth-submenuItemWidth)/2);

            dropdown.addClass('animated fadeInDownSmall').one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function(){
                dropdown.removeClass('animated fadeInDownSmall');
            });
        }, function(){
            var $this = $(this),
                dropdown = $this.children(".other-versions");

            dropdown.addClass('animated fadeOutUpSmall').one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function(){
                $(this).removeClass('animated fadeOutUpSmall').addClass('hidden');
            });
        });
    });
</script>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <div id="body">
                            
  <div class="section" id="cookbook">
<h1>Cookbook<a class="headerlink" href="#cookbook" title="Permalink to this headline">¶</a></h1>
<p>The Cookbook is a collection of specific recipes that explain how to correctly solve the most recurrent problems
that developers face in their day to day work.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#disable-child-extensions" id="id1">Disable Child Extensions</a></li>
<li><a class="reference internal" href="#validate-child-extensions" id="id2">Validate Child Extensions</a></li>
<li><a class="reference internal" href="#download-udpate-extension-via-github" id="id3">Download/Udpate Extension via GitHub</a></li>
<li><a class="reference internal" href="#download-udpate-extension-via-custom-server" id="id4">Download/Udpate Extension via custom server.</a></li>
</ul>
</div>
<div class="section" id="disable-child-extensions">
<h2><a class="toc-backref" href="#contents">Disable Child Extensions</a><a class="headerlink" href="#disable-child-extensions" title="Permalink to this headline">¶</a></h2>
<p>Child extensions will not be activated if parent extension will <code class="docutils literal"><span class="pre">return</span> <span class="pre">false;</span></code> from <code class="docutils literal"><span class="pre">_init()</span></code>.</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">defined</span><span class="p">(</span><span class="s1">&#39;FW&#39;</span><span class="p">))</span> <span class="k">die</span><span class="p">(</span><span class="s1">&#39;Forbidden&#39;</span><span class="p">);</span>

<span class="k">class</span> <span class="nc">FW_Extension_Example</span> <span class="k">extends</span> <span class="nx">FW_Extension</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @internal</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="k">function</span> <span class="nf">_init</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">something_is_wrong</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">false</span><span class="p">;</span> <span class="c1">// prevent child extensions activation</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="validate-child-extensions">
<h2><a class="toc-backref" href="#contents">Validate Child Extensions</a><a class="headerlink" href="#validate-child-extensions" title="Permalink to this headline">¶</a></h2>
<p>The parent extension has the possibility to check each child extension if it’s valid or not. If the child extension is not valid, it will not be activated. To do that, the parent extension must overwrite the <code class="docutils literal"><span class="pre">_child_extension_is_valid()</span></code> method.</p>
<p>The method should return <code class="docutils literal"><span class="pre">true</span></code> if child extension is valid, and <code class="docutils literal"><span class="pre">false</span></code> if not.</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">defined</span><span class="p">(</span><span class="s1">&#39;FW&#39;</span><span class="p">))</span> <span class="k">die</span><span class="p">(</span><span class="s1">&#39;Forbidden&#39;</span><span class="p">);</span>

<span class="k">class</span> <span class="nc">FW_Extension_Example</span> <span class="k">extends</span> <span class="nx">FW_Extension</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * {@inheritdoc}</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">_child_extension_is_valid</span><span class="p">(</span><span class="nv">$child_extension_instance</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// force child extensions to extend some custom class, instead of FW_Extension</span>
        <span class="k">return</span> <span class="nb">is_subclass_of</span><span class="p">(</span><span class="nv">$child_extension_instance</span><span class="p">,</span> <span class="s1">&#39;FW_Ext_Demo_Custom_Class&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="download-udpate-extension-via-github">
<h2><a class="toc-backref" href="#contents">Download/Udpate Extension via GitHub</a><a class="headerlink" href="#download-udpate-extension-via-github" title="Permalink to this headline">¶</a></h2>
<p>Let’s say you want to add some extensions available for your theme. To install extension from your GitHub repository you can add a file <code class="docutils literal"><span class="pre">available-extensions.php</span></code> in your <code class="docutils literal"><span class="pre">yourTheme/framework-customizations/theme/available-extensions.php</span></code> with the following code:</p>
<blockquote>
<div><div class="highlight-php"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span> <span class="nb">defined</span><span class="p">(</span> <span class="s1">&#39;FW&#39;</span> <span class="p">)</span> <span class="k">or</span> <span class="k">die</span><span class="p">();</span>

<span class="c1">// is executed when the extension is first installed</span>
<span class="nv">$extensions</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;extension_name&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;display&#39;</span>     <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
        <span class="s1">&#39;parent&#39;</span>      <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span>
        <span class="s1">&#39;name&#39;</span>        <span class="o">=&gt;</span> <span class="nx">__</span><span class="p">(</span> <span class="s1">&#39;Extension name&#39;</span><span class="p">,</span> <span class="s1">&#39;fw&#39;</span> <span class="p">),</span>
        <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="nx">__</span><span class="p">(</span> <span class="s1">&#39;Extension description.&#39;</span><span class="p">,</span> <span class="s1">&#39;fw&#39;</span> <span class="p">),</span>
        <span class="s1">&#39;thumbnail&#39;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;pathToThumbnail/thumbnail.jpg&#39;</span><span class="p">,</span>
        <span class="s1">&#39;download&#39;</span>    <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;source&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;github&#39;</span><span class="p">,</span>
            <span class="s1">&#39;opts&#39;</span>   <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;user_repo&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;https://github.com/yourUsername/yourRepositoryExtension&#39;</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">),</span>
<span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>To allow your extension to download updates from GitHub add in its manifest.php key with your URL to GitHub repository:</p>
<blockquote>
<div><div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$manifest</span><span class="p">[</span><span class="s1">&#39;github_repo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;https://github.com/yourUsername/yourRepositoryExtension&#39;</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>On GitHub create first tag version release otherwise GitHub API can’t return any version.</p>
</div>
<div class="section" id="download-udpate-extension-via-custom-server">
<h2><a class="toc-backref" href="#contents">Download/Udpate Extension via custom server.</a><a class="headerlink" href="#download-udpate-extension-via-custom-server" title="Permalink to this headline">¶</a></h2>
<p>Let’s say you want to add some extensions available for your theme. To install extension from your custom server you can add a file <code class="docutils literal"><span class="pre">available-extensions.php</span></code> in your <code class="docutils literal"><span class="pre">yourTheme/framework-customizations/theme/available-extensions.php</span></code> with the following code:</p>
<blockquote>
<div><div class="highlight-php"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span> <span class="nb">defined</span><span class="p">(</span> <span class="s1">&#39;FW&#39;</span> <span class="p">)</span> <span class="k">or</span> <span class="k">die</span><span class="p">();</span>

<span class="c1">// is executed when the extension is first installed</span>
<span class="nv">$extensions</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;extension_name&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;display&#39;</span>     <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
        <span class="s1">&#39;parent&#39;</span>      <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span>
        <span class="s1">&#39;name&#39;</span>        <span class="o">=&gt;</span> <span class="nx">__</span><span class="p">(</span> <span class="s1">&#39;Extension name&#39;</span><span class="p">,</span> <span class="s1">&#39;fw&#39;</span> <span class="p">),</span>
        <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="nx">__</span><span class="p">(</span> <span class="s1">&#39;Extension description.&#39;</span><span class="p">,</span> <span class="s1">&#39;fw&#39;</span> <span class="p">),</span>
        <span class="s1">&#39;thumbnail&#39;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;pathToThumbnail/thumbnail.jpg&#39;</span><span class="p">,</span>
        <span class="s1">&#39;download&#39;</span>    <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;source&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;custom&#39;</span><span class="p">,</span>
            <span class="s1">&#39;opts&#39;</span>   <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="c1">// All these keys you can access on your server</span>
                <span class="s1">&#39;remote&#39;</span>       <span class="o">=&gt;</span> <span class="s1">&#39;https://yourServerName/versions/&#39;</span><span class="p">,</span> <span class="c1">// Required</span>
                <span class="s1">&#39;purchase_key&#39;</span> <span class="o">=&gt;</span> <span class="nx">get_option</span><span class="p">(</span> <span class="s1">&#39;user_purchase_key&#39;</span> <span class="p">)</span>
            <span class="p">),</span>
        <span class="p">),</span>
    <span class="p">),</span>
<span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>To allow your extension to download updates from your server add in its manifest.php key with your URL to your server:</p>
<blockquote>
<div><div class="highlight-php"><div class="highlight"><pre><span></span><span class="c1">// All keys added in manifest you can access on your custom server so you can check for purchase key, username, etc.</span>
<span class="nv">$manifest</span><span class="p">[</span><span class="s1">&#39;remote&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;https://yourServerName/versions/&#39;</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
<p>On your server create a file index.php in <code class="docutils literal"><span class="pre">https://yourServerName/versions/index.php</span></code>:</p>
<blockquote>
<div><div class="highlight-php"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// Here you have entire manifest sttings on update or on install extenions array &#39;opts&#39; from available-extensions.php</span>
<span class="nv">$set</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span> <span class="nb">file_get_contents</span><span class="p">(</span> <span class="s1">&#39;php://input&#39;</span> <span class="p">),</span> <span class="k">true</span> <span class="p">);</span>

 <span class="cm">/*</span>
<span class="cm"> * pull - what client&#39;s server wants to get. Version or theme/extension zip archive</span>
<span class="cm"> * type - item type can be theme or extension</span>
<span class="cm"> */</span>

<span class="nv">$vars</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;pull&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">&#39;version&#39;</span><span class="p">,</span> <span class="s1">&#39;zip&#39;</span> <span class="p">),</span>
    <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">&#39;theme&#39;</span><span class="p">,</span> <span class="s1">&#39;extension&#39;</span> <span class="p">)</span>
<span class="p">);</span>

<span class="k">foreach</span><span class="p">(</span> <span class="nv">$vars</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$values</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$set</span><span class="p">[</span> <span class="nv">$key</span> <span class="p">]</span> <span class="p">)</span> <span class="o">||</span> <span class="o">!</span> <span class="nb">in_array</span><span class="p">(</span> <span class="nv">$set</span><span class="p">[</span> <span class="nv">$key</span> <span class="p">],</span> <span class="nv">$values</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">die</span><span class="p">(</span> <span class="nb">json_encode</span><span class="p">(</span> <span class="k">array</span><span class="p">(</span> <span class="s1">&#39;error&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Something went wrong. Please contact support team.&#39;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

 <span class="cm">/*</span>
<span class="cm"> *  If you have many extensions or themes, check if you have it.</span>
<span class="cm"> *  item - is name of extension or id of theme from manifest.php</span>
<span class="cm"> */</span>
<span class="nv">$my_products</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;extension&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">&#39;extension_name&#39;</span><span class="p">,</span> <span class="s1">&#39;extension_name1&#39;</span> <span class="p">),</span>
    <span class="s1">&#39;theme&#39;</span>     <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">&#39;scratch&#39;</span><span class="p">,</span> <span class="s1">&#39;scratch1&#39;</span> <span class="p">),</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$set</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">]</span> <span class="p">)</span> <span class="o">||</span> <span class="o">!</span> <span class="nb">in_array</span><span class="p">(</span> <span class="nv">$set</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">],</span> <span class="nv">$my_products</span><span class="p">[</span> <span class="nv">$set</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">die</span><span class="p">(</span> <span class="nb">json_encode</span><span class="p">(</span> <span class="k">array</span><span class="p">(</span> <span class="s1">&#39;error&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;This item doesn\&#39;t exists.&#39;</span>  <span class="p">)</span> <span class="p">)</span> <span class="p">);</span>
<span class="p">}</span>

<span class="sd">/**</span>
<span class="sd"> * Extract latest version for theme or extension.</span>
<span class="sd"> */</span>
<span class="nv">$version</span> <span class="o">=</span> <span class="s1">&#39;1.0.1&#39;</span><span class="p">;</span>

<span class="c1">// Client&#39;s server asked for version just return it.</span>
<span class="k">if</span> <span class="p">(</span> <span class="nv">$set</span><span class="p">[</span><span class="s1">&#39;pull&#39;</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;version&#39;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">die</span><span class="p">(</span> <span class="nv">$version</span> <span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm">    if ( empty( $set[&#39;purchase_key&#39;] ) ) {</span>
<span class="cm">        die( json_encode( array( &#39;error&#39; =&gt; &#39;Please insert purchase key.&#39; ) ) );</span>
<span class="cm">    }</span>

<span class="cm">    // Check here if purchase_key is valid.</span>
<span class="cm">    if ( ! is_valid( $set[&#39;purchase_key&#39;] ) ) {</span>
<span class="cm">        die( json_encode( array( &#39;error&#39; =&gt; &#39;Purchase key is not valid.&#39; ) ) );</span>
<span class="cm">    }</span>
<span class="cm">*/</span>

<span class="sd">/**</span>
<span class="sd"> * Build path to archive.</span>
<span class="sd"> */</span>
<span class="nv">$path</span> <span class="o">=</span> <span class="nb">dirname</span><span class="p">(</span> <span class="no">__FILE__</span> <span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;/</span><span class="si">{</span><span class="nv">$set</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="nv">$version</span><span class="si">}</span><span class="s2">.zip&quot;</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nb">file_exists</span><span class="p">(</span> <span class="nv">$path</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">die</span><span class="p">(</span> <span class="nb">json_encode</span><span class="p">(</span> <span class="k">array</span><span class="p">(</span> <span class="s1">&#39;error&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;File zip doesn\&#39;t exists.&#39;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">);</span>
<span class="p">}</span>

<span class="nb">header</span><span class="p">(</span> <span class="s1">&#39;Content-Type: application/zip&#39;</span> <span class="p">);</span>
<span class="nb">header</span><span class="p">(</span> <span class="s1">&#39;Content-Disposition: attachment; filename=&#39;</span> <span class="o">.</span>  <span class="nb">basename</span><span class="p">(</span> <span class="nv">$path</span> <span class="p">)</span> <span class="p">);</span>
<span class="nb">header</span><span class="p">(</span> <span class="s1">&#39;Content-Length: &#39;</span> <span class="o">.</span> <span class="nb">filesize</span><span class="p">(</span> <span class="nv">$path</span> <span class="p">)</span> <span class="p">);</span>
<span class="nb">readfile</span><span class="p">(</span> <span class="nv">$path</span> <span class="p">);</span>

<span class="k">die</span><span class="p">();</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>


                        </div>

                        
    <div class="pagination clearfix">
        
            <a href="create-extension.html" class="prev" ><i class="icon-arrow-left"></i> <span>Create Extension</span></a>
        
        
            <a href="../components/index.html" class="next" ><span>Components</span> <i class="icon-arrow-right"></i></a>
        
    </div>

                    </div>
                    <div class="col-sm-4">
                        <div id="menu-wrapper">
                            <h3 class="menu-title">Developer Manual</h3>
                            <div id="menu">

                                <ul class="" id="custom-menu-top">
                                    <li class="toctree-l1"><a class="reference internal" href="../index.html">Unyson Framework</a>
                                        <ul class="current">
                                            <li class="toctree-l2">
                                                <a class=" reference internal" href="../index.html">Getting Started</a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>

                                
                                
                                    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../convention/index.html">Convention</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../convention/general.html">General</a></li>
<li class="toctree-l2"><a class="reference internal" href="../convention/prefixes.html">Prefixes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../convention/directory-structure.html">Directory Structure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../options/index.html">Options</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../options/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../options/integrate.html">Theme Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../options/customizer.html">Customizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../options/option-types.html">Option Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../options/built-in/introduction.html">Built-in Option Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../options/create-option-type.html">Create Option Type</a></li>
<li class="toctree-l2"><a class="reference internal" href="../options/storage.html">Custom Save Location</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Extensions</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-extension.html">Create Extension</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Cookbook</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../components/index.html">Components</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../components/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../components/theme.html">Theme</a></li>
<li class="toctree-l2"><a class="reference internal" href="../components/backend.html">Backend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../components/extensions.html">Extensions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../helpers/index.html">Helpers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../helpers/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/php.html">PHP Helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/javascript.html">JavaScript Helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../helpers/css.html">CSS Helpers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../manifest/index.html">Manifest</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../manifest/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manifest/framework.html">Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manifest/theme.html">Theme</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manifest/extension.html">Extension</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../extension/index.html">Built-in Extensions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../extension/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extension/shortcodes/index.html">Shortcodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extension/slider/index.html">Slider</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extension/megamenu/index.html">Mega Menu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extension/sidebars/index.html">Sidebars</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extension/portfolio/index.html">Portfolio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extension/backups/index.html">Backup &amp; Demo Content</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extension/forms/index.html">Forms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extension/breadcrumbs/index.html">Breadcrumbs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extension/seo/index.html">SEO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extension/events/index.html">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extension/social/index.html">Social</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extension/builder/index.html">Builder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extension/feedback/index.html">Feedback</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extension/learning/index.html">Learning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extension/translation/index.html">Translation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extension/wp-shortcodes/index.html">WordPress Shortcodes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../hooks/index.html">Filters &amp; Actions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../hooks/index.html#actions">Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hooks/index.html#filters">Filters</a></li>
</ul>
</li>
</ul>

                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer id="footer" class="site-footer" role="contentinfo">
    <div class="container">
        <div class="row">
            <div class="col-md-16">
                <div class="copyright">
                    <p>
                            &copy; 2017 Unyson | Theming Fast & Easy <br>Developed by: <a target="_blank" href="http://themefuse.com">ThemeFuse</a>	Icons by: <a target="_blank" href="http://pixelkit.com">PixelKit</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</footer>

    
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-15832274-21']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>
     
</body>
</html>